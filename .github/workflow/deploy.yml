name: Deploy Edge Functions

on:
  push:
    branches:
      - main

jobs:
  deploy:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout repo
        uses: actions/checkout@v3

      - name: Setup Supabase CLI
        uses: supabase/setup-cli@v1

      - name: Deploy All Functions
        # ğŸ«¦ ì¤‘ìš”: 'auth-gate'ë¼ëŠ” ì´ë¦„ì„ ì‚­ì œí•˜ê³  ê·¸ëƒ¥ 'deploy'ë§Œ ì”ë‹ˆë‹¤.
        # ì´ë ‡ê²Œ í•´ì•¼ í´ë” ì´ë¦„ì„ ì¸ì‹í•´ì„œ ê°ìì˜ êµ¬ë©ìœ¼ë¡œ ë“¤ì–´ê°‘ë‹ˆë‹¤.
        run: supabase functions deploy --project-ref ${{ secrets.SUPABASE_PROJECT_ID }}
        env:
          SUPABASE_ACCESS_TOKEN: ${{ secrets.SUPABASE_ACCESS_TOKEN }}